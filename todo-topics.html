<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><title>4&nbsp;More Topics to Cover</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">Macros and Languages in Racket</a></td></tr></table></div><div class="tocviewsublistonly" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="basic.html" class="tocviewlink" data-pltdoc="x">Basic Macrology</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="validate.html" class="tocviewlink" data-pltdoc="x">Specifying and Validating Syntax</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="solutions.html" class="tocviewlink" data-pltdoc="x">Solutions for Selected Exercises</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">More Topics to Cover</a></td></tr></table></div></div></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft">&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="exercise-solution-minimatch.html" title="backward to &quot;3.5 Solution for Exercise 18&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Macros and Languages in Racket&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div><h3>4<tt>&nbsp;</tt><a name="(part._todo-topics)"></a>More Topics to Cover</h3><p><span style="font-weight: bold">Basic macrology</span></p><p>A macro is a rewrite rule. It only applies to certain terms (no
general rewriters like optimization). It only applies in certain
context. Expansion is outward-in: discovery process.</p><p>Expressions have dynamic and static contexts.</p><p>Dynamic context: continuation marks, parameters, other state (order of
evaluation, etc).</p><p>Static context: environment, syntax parameters. More exotic: phase,
submodule.</p><p>Basic hygiene.</p><p>Basic pattern matching.</p><p><div class="SIntrapara">Misc advice:
</div><div class="SIntrapara"><ul><li><p>Don&rsquo;t use a macro when a function would suffice.</p></li><li><p>Not every macro needs to be written.</p></li></ul></div></p><p><span style="font-weight: bold">Intermediate Macrology: Specifying and Validating Syntax</span></p><p><span class="RktSym">syntax-parse</span>, syntax specification (grammars), validation and
error-checking</p><p>The structure of syntax. Think in terms of nonterminals. When writing
functions on syntax, write one function per nonterminal.</p><p>Do functions on subterms first, then talk about moving code to
stxclass attrs.</p><p>syntax ergonomics, eg positional forms vs keyords vs identifier-tagged
subforms.</p><p>Ergonomics/conventions: Eval subexprs in original order. Do error
checking of arguments in order, when possible.</p><p>special subforms (w/o extensibility)</p><p><span class="RktSym">syntax-case</span> and error-checking (aside)</p><p>Note: this section might need forward references to Phases section
(just point out compile-time vs run-time code, say Phases deals with
in more detail later).</p><p><span style="font-weight: bold">Intermediate Macrology: Syntax Objects</span></p><p>Below the pattern-matching abstractions: <span class="RktSym">syntax-e</span>,
<span class="RktSym">datum-&gt;syntax</span>, and <span class="RktSym">quote-syntax</span>.</p><p>Rule: Never use <span class="RktSym">syntax-&gt;datum</span> on an expression or a term
containing expressions.</p><p>Source information.</p><p>Syntax properties.</p><p><span style="font-weight: bold">Intermediate Macrology: Phases</span></p><p>Compile-time helper functions, modules, begin-for-syntax, phases,
require for-{syntax,template}.</p><p>The Why of Phases.</p><p>syntax templates, phases, env catalog</p><p><span style="font-weight: bold">Intermediate Macrology: communication w/ syntax-local-value</span></p><p>Communication via syntax-local-value.
 - ordinary communication
 - extensible subforms</p><p><span style="font-weight: bold">Intermediate Macrology: uncategorized</span></p><p>Racket language elements: expressions, definitions, module-form forms,
etc. Modules and languages.</p><p>Communication via compile-time state (eg, identifier tables). Define
vs attach.</p><p>#%expression</p><p>Identifier comparisons: bound-id=?, free-id=? (and phases).</p><p>3d syntax.</p><p>Hygiene details: marks, renames, namespaces, gradual discovery.</p><p>Breaking hygiene: how to do it right, and alternatives.</p><p>How to test macros: Test run-time behavior, test binding, test syntax
errors.</p><p>Monolithic vs microlithic macros. Trampoline style macros.</p><p>Applicable structs and macros that act as expressions as well as
something else (eg struct names).</p><p><span style="font-weight: bold">Advanced Macrology</span></p><p>Head expansion.</p><p>Full expansion, analysis, and transformation (instrumentation). In
macro w/ local-expand; in run-time tool w/ expand.</p><p>(refer back to monolithic/microlithic/trampoline)</p><div class="navsetbottom"><span class="navleft">&nbsp;&nbsp;</span><span class="navright">&nbsp;&nbsp;<a href="exercise-solution-minimatch.html" title="backward to &quot;3.5 Solution for Exercise 18&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Macros and Languages in Racket&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<span class="nonavigation">next &rarr;</span></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>